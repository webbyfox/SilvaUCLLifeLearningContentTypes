<html
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva">

<!--
macros:
sidebar-column:
   used by edit tab layouts to render the standard sidebar
main-title:
   macro to render the h2 title of the content (i.e.
   icon + meta type + <<contenttitle>>
three-col-layout
two-col-layout
  -- three column layouts
  * sidebar
    -- override the default sidebar-column
  * main-model
    -- the entire center column
    * main-head
      -- for text or controls within the <thead>
    * main-body
      -- the stuff in the tbody
    * main-foot
      -- controls and such in the <tfoot>
  * main-extra
    -- more stuff / extra data and controls below the main controls table
  * right-column (only on three-col-layout!)
    -- usually this has "info" about the content editor
  * metatype_css
    -- stylesheets for meta type
  * refresher
  * script
    -- include javascripts
  * middleground
    -- typically buttons to send to other views as well as actions
  * notice
  * main
    -- fill this slot with either the two-col-layout or
       three-col-layout, or create your own layout
-->

<tal:block replace="nothing">
  _____________________ sidebar _____________________
</tal:block>
<metal:macro define-macro="sidebar-column">
 <td class="left"
   tal:define="template_id string:tab_edit">
   <metal:block use-macro="view/macro_vein_navigation/macros/vein" />
 </td>
</metal:macro>

<tal:block replace="nothing">
 _____________________ main-title _____________________
</tal:block>
<metal:macro define-macro="main-title">
 <h2>
  <img tal:replace="structure python:view.render_icon(model)" />
  <tal:repl replace="pretty_meta_type|model/meta_type" />
  &#xab;<tal:block content="model/get_title_or_id"/>&#xbb;
 </h2>
</metal:macro>

<metal:three-col-layout define-macro="three-col-layout">
 <table class="columns columns3">
  <tbody>
   <tr>
    <tal:block replace="nothing">
     _____________________ sidebar _____________________
    </tal:block>
    <metal:block define-slot="sidebar">
     <metal:block use-macro="here/macro_edit/macros/sidebar-column" />
    </metal:block>
    <tal:block replace="nothing">
     _____________________ main _____________________
    </tal:block>
    <td class="main">
     <form method="post" name="form" action=".">
     <table class="listing" metal:define-slot="main-model">
      <thead>
       <tal:block replace="nothing">
        ______________ vein + title row ______________
       </tal:block>
       <tr>
        <td class="top" tal:attributes="colspan maintitlecolspan|nothing">
         <metal:use use-macro="here/macro_edit/macros/main-title" />
        </td>
       </tr>
       <metal:slot define-slot="main-head" />
      </thead>
      <tbody>
       <metal:slot define-slot="main-body" />
      </tbody>
      <tfoot>
       <metal:slot define-slot="main-foot" />
      </tfoot>
     </table>
     </form>
     <metal:slot define-slot="main-extra" />
    </td>
    <tal:block replace="nothing">
      _____________________ right column _____________________
    </tal:block>
    <td class="right">
      <metal:slot define-slot="right-column">&nbsp;</metal:slot>
    </td>
   </tr>
  </tbody>
 </table>
</metal:three-col-layout>

<metal:two-col-layout define-macro="two-col-layout">
 <table class="columns columns2">
  <tbody>
   <tr>
    <tal:block replace="nothing">
     _____________________ sidebar _____________________
    </tal:block>
    <metal:block define-slot="sidebar">
     <metal:block use-macro="here/macro_edit/macros/sidebar-column" />
    </metal:block>
    <tal:block replace="nothing">
     _____________________ main _____________________
    </tal:block>
    <td class="main">
     <form method="post" name="silvaObjects" action=".">
     <table class="listing" metal:define-slot="main-model">
      <thead>
       <tal:block replace="nothing">
        ______________ vein + title row ______________
       </tal:block>
       <tr>
        <td class="top" tal:attributes="colspan maintitlecolspan|nothing">
         <metal:use use-macro="here/macro_edit/macros/main-title" />
        </td>
       </tr>
       <metal:slot define-slot="main-head" />
      </thead>
      <tbody>
       <metal:slot define-slot="main-body" />
      </tbody>
      <tfoot>
       <metal:slot define-slot="main-foot" />
      </tfoot>
     </table>
     </form>
     <metal:slot define-slot="main-extra" />
    </td>
   </tr>
  </tbody>
 </table>
</metal:two-col-layout>

<metal:editor define-macro="editor"
  tal:define="
    model request/model;
    vein vein|string:'edit'">
 <metal:use use-macro="here/macro_index/macros/master">
  <metal:fill-slot fill-slot="metatype_css">
   <metal:block define-slot="metatype_css" />
  </metal:fill-slot>
  <metal:block fill-slot="refresher">
   <metal:block define-slot="refresher" />
  </metal:block>
  <metal:block fill-slot="script">
   <metal:block define-slot="script" />
  </metal:block>
  <metal:block fill-slot="middleground">
   <metal:block define-slot="middleground" />
  </metal:block>
  <metal:block fill-slot="notice">
   <metal:block define-slot="notice" />
  </metal:block>
  <metal:fill fill-slot="main">
   <!-- only require slot to fill - put your editor layout in here -->
   <metal:block define-slot="main" />
  </metal:fill>
 </metal:use>
</metal:editor>

</html>
